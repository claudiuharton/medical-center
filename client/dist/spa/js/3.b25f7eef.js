(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"10e9":function(e,t,s){var i=s("24fb");t=i(!1),t.push([e.i,".calendar-container{position:relative}.medic .q-calendar-daily__day-interval:hover{background-color:#f5f5f5}.medic .q-calendar-daily__day-interval{cursor:pointer}.medic .q-calendar-weekly__day:hover{background-color:#f5f5f5}.medic .q-calendar-weekly__day{cursor:pointer}.my-event{width:100%;position:absolute;font-size:12px}.full-width{left:0;width:100%}.left-side{left:0;width:49.75%}.right-side{left:50.25%;width:49.75%}@media (min-width:600px){.q-dialog__inner--minimized>div{max-width:700px}}.bg-grey{background:#696969!important}.bg-green{background:#006400!important}.bg-blue{background:#027be3!important}.bg-teal{background:#009688!important}",""]),e.exports=t},"3dd9":function(e,t,s){var i=s("10e9");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=s("499e").default;a("49d7977d",i,!0,{sourceMap:!1})},"63fa":function(e,t,s){var i=s("e0b4");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=s("499e").default;a("920d1496",i,!0,{sourceMap:!1})},"6ccf":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{},[s("navbar"),s("q-tabs",{staticClass:"bg-grey-2 text-primary shadow-2",attrs:{dense:"",align:"justify",breakpoint:0},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[e.isAdmin||e.isMedic?s("q-tab",{attrs:{name:"services",label:"Services"}}):e._e(),s("q-tab",{attrs:{name:"appointments",label:"Appointments"}}),e.isAdmin||!e.isMedic?s("q-tab",{attrs:{name:"subscriptions",label:"Subscriptions"}}):e._e()],1),s("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[e.isAdmin||e.isMedic?s("q-tab-panel",{attrs:{name:"services"}},[s("service")],1):e._e(),s("q-tab-panel",{attrs:{name:"appointments"}},[e.isAdmin?s("appointment-for-admin"):s("appointment")],1),e.isAdmin||!e.isMedic?s("q-tab-panel",{attrs:{name:"subscriptions"}},[e.isAdmin?s("subscriptions-for-admin"):s("subscriptions")],1):e._e()],1)],1)},a=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("q-table",{staticStyle:{margin:"50px"},attrs:{title:"All appointments",data:e.events,filter:e.filter,columns:e.columns,"row-key":"id"},scopedSlots:e._u([{key:"top-right",fn:function(){return[s("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-actions",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("q-btn",{staticClass:"button",staticStyle:{"margin-right":"20px"},attrs:{outline:"",round:"",color:"primary",icon:"read_more"},on:{click:function(s){return e.viewAppointment(t.row)}}})],1)]}}])}),s("q-dialog",{model:{value:e.card,callback:function(t){e.card=t},expression:"card"}},[s("q-card",{staticStyle:{width:"80%"}},[s("q-toolbar",{staticClass:"q-mt-md row"},[s("q-avatar",[s("q-icon",{attrs:{name:"local_hospital",size:"lg"}})],1),s("q-toolbar-title",{staticClass:"text-weight-bold"},[e._v("Appointment reservation\n        ")]),e.selectedEvent.url?s("div",{staticClass:"row justify-center items-center"},[s("q-toolbar-title",[e._v(" Join room ")]),s("q-btn",{attrs:{icon:"videocam",color:"primary",size:"lg",fill:"",type:"a",round:"",target:"_blank",dense:""},on:{click:function(t){return e.onClickUrl(e.selectedUrl)}}})],1):e._e()],1),s("div",{staticClass:"row "},[s("q-card-section",{staticClass:"column"},[s("p",{staticClass:"q-ml-sm  q-ma-xs text-body1 text-weight-bold"},[e._v("\n            Service details:\n          ")]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Name: "),s("b",[e._v(e._s(e.selectedEvent.service.name))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Category: "),s("b",[e._v(e._s(e.selectedEvent.service.category))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Description: "),s("b",[e._v(e._s(e.selectedEvent.service.description))])])]),s("q-card-section",{staticClass:"q-ml-xl column"},[s("p",{staticClass:"q-ml-sm  q-ma-xs text-body1 text-weight-bold"},[e._v("\n            Reservation details:\n          ")]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Date: "),s("b",[e._v(e._s(e.selectedEvent.date))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Time: "),s("b",[e._v(e._s(e.selectedEvent.time))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Duration: "),s("b",[e._v(e._s(e.selectedEvent.duration)+" minutes")])])])],1),s("q-card-section",[s("q-input",{staticClass:"q-ml-sm",attrs:{filled:"",readonly:"",label:"Observations",autogrow:""},model:{value:e.selectedEvent.observation,callback:function(t){e.$set(e.selectedEvent,"observation",t)},expression:"selectedEvent.observation"}})],1),s("q-card-section",{staticClass:" column"},[s("p",{staticClass:"q-ml-sm  q-ma-xs text-body1 text-weight-bold"},[e._v("\n          Medic details:\n        ")]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n          Name:\n          "),s("b",[e._v(e._s(e.selectedEvent.medic.firstName)+"\n            "+e._s(e.selectedEvent.medic.lastName))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n          Phone: "),s("b",[e._v(e._s(e.selectedEvent.medic.phone))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n          Email: "),s("b",[e._v(e._s(e.selectedEvent.medic.email))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n          City: "),s("b",[e._v(e._s(e.selectedEvent.medic.city))])]),s("q-input",{staticClass:"q-ml-xl q-ma-none",staticStyle:{width:"80%"},attrs:{outlined:"",dense:!0,readonly:""},model:{value:e.selectedEvent.medic.info,callback:function(t){e.$set(e.selectedEvent.medic,"info",t)},expression:"selectedEvent.medic.info"}})],1),s("q-card-section",{staticClass:" column"},[s("p",{staticClass:"q-ml-sm  q-ma-xs text-body1 text-weight-bold"},[e._v("\n          Patient details:\n        ")]),e.selectedEvent.patient?s("div",[s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Name:\n            "),s("b",[e._v(e._s(e.selectedEvent.patient.firstName)+"\n              "+e._s(e.selectedEvent.patient.lastName))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Phone: "),s("b",[e._v(e._s(e.selectedEvent.patient.phone))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Email: "),s("b",[e._v(e._s(e.selectedEvent.patient.email))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            City: "),s("b",[e._v(e._s(e.selectedEvent.patient.city))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Birth date: "),s("b",[e._v(e._s(e.selectedEvent.patient.birthDate))])]),s("q-input",{staticClass:"q-ml-xl q-ma-none",staticStyle:{width:"80%"},attrs:{outlined:"",dense:!0,readonly:""},model:{value:e.selectedEvent.patient.info,callback:function(t){e.$set(e.selectedEvent.patient,"info",t)},expression:"selectedEvent.patient.info"}})],1):s("p",{staticClass:"q-ml-xl  q-ma-xs"},[e._v("Not reserved yet")])])],1)],1)],1)},r=[],o=(s("456d"),s("8a81"),s("d25f"),s("9986"),s("8e6e"),s("9523")),c=s.n(o);s("7f7f");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){c()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={name:"Service",data:function(){return{state:"VIEW",filter:"",card:!1,selectedEvent:{id:3,duration:20,date:"2021-05-25T04:36:27.000Z",url:"un link ceva",observation:null,medic:{id:1,firstName:"George",lastName:"Vasile",info:"Hellow there",email:"george.vasile2@gmail.com",phone:"0722222222",city:"Bucharest"},patient:{id:2,firstName:"George",lastName:"Pacientul",info:"ceva",email:"george.vasile@gmail.com",phone:"0722222222",city:"Bucharest",birthDate:"1999/12/12"},service:{id:1,name:"Tratament 1",category:"analiza",description:"altceva",createdAt:"2021-05-23T22:51:58.000Z",updatedAt:"2021-05-25T02:18:56.000Z"}},columns:[{name:"dateTime",required:!0,label:"Date Time",align:"left",field:function(e){return e.date},format:function(e){return"".concat(e)},sortable:!0},{name:"medic",required:!0,label:"Medic",align:"left",field:function(e){return e.medic},format:function(e){return"".concat(e.firstName," ").concat(e.lastName)},sortable:!0},{name:"patient",required:!1,label:"Patient",align:"left",field:function(e){return e.patient},format:function(e){return e?"".concat(e.firstName," ").concat(e.lastName):"N/A"},sortable:!0},{name:"service",required:!0,label:"Service",align:"left",field:function(e){return e.service},format:function(e){return"".concat(e.name)},sortable:!0},{name:"actions",label:"Action"}]}},beforeMount:function(){var e=this.$q.localStorage.getItem("user");e?(this.$store.dispatch("data/loadServices"),this.$store.dispatch("data/loadAdminAppointments"),this.$store.dispatch("data/loadMedicServices")):this.$router.push("/auth")},methods:{viewAppointment:function(e){this.card=!0,this.selectedEvent=d({},e)},onClickUrl:function(e){openURL(e)}},computed:{events:function(){return this.$store.getters["data/getAdminAppointments"]}}},p=u,m=s("2877"),f=s("eaac"),v=s("27f9"),b=s("0016"),g=s("db86"),h=s("9c40"),y=s("24e8"),q=s("f09f"),x=s("65c6"),_=s("cb32"),w=s("6ac5"),S=s("a370"),C=s("eebe"),k=s.n(C),E=Object(m["a"])(p,n,r,!1,null,null,null),$=E.exports;k()(E,"components",{QTable:f["a"],QInput:v["a"],QIcon:b["a"],QTd:g["a"],QBtn:h["a"],QDialog:y["a"],QCard:q["a"],QToolbar:x["a"],QAvatar:_["a"],QToolbarTitle:w["a"],QCardSection:S["a"]});var P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isMedic?e._e():s("q-select",{attrs:{filled:"",multiple:"",options:e.optionsMedics,"use-chips":"","stack-label":"","use-input":"","input-debounce":"0",label:"Medics selected"},on:{filter:e.filterMedics},model:{value:e.selectedMedics,callback:function(t){e.selectedMedics=t},expression:"selectedMedics"}}),e.isMedic?s("q-select",{attrs:{filled:"",multiple:"",options:e.optionsPatients,"use-chips":"","stack-label":"","use-input":"","input-debounce":"0",label:"Patients selected"},on:{filter:e.filterPatients},model:{value:e.selectedPatients,callback:function(t){e.selectedPatients=t},expression:"selectedPatients"}}):e._e(),s("q-separator"),s("q-select",{attrs:{filled:"",multiple:"",options:e.optionsServices,"use-chips":"","use-input":"","input-debounce":"0","stack-label":"",label:"Services selected"},on:{filter:e.filterServices},model:{value:e.selectedServices,callback:function(t){e.selectedServices=t},expression:"selectedServices"}}),s("q-separator"),s("q-checkbox",{attrs:{label:"Only my appointments"},model:{value:e.onlyHis,callback:function(t){e.onlyHis=t},expression:"onlyHis"}}),s("div",{staticClass:"row justify-center q-mb-md"},[s("q-btn",{attrs:{filled:"",label:"Prev"},on:{click:e.calendarPrev}}),s("q-separator",{attrs:{vertical:""}}),s("q-select",{attrs:{filled:"",options:e.viewOptions},model:{value:e.view,callback:function(t){e.view=t},expression:"view"}}),s("q-separator",{attrs:{vertical:""}}),s("q-btn",{attrs:{filled:"",label:"Next"},on:{click:e.calendarNext}})],1),s("q-separator"),e.isMedic?s("q-calendar",{ref:"calendar",staticClass:"calendar-container medic",attrs:{view:e.view.value,locale:"en-us","enable-outside-days":!0,animated:"",bordered:!0,"interval-height":50,"interval-start":8,"interval-count":10,weekdays:[1,2,3,4,5,6,0],"transition-prev":"slide-right","transition-next":"slide-left"},on:{"click:time2":e.onClickTime,"click:day2":e.onClickTime},scopedSlots:e._u([{key:"day-header",fn:function(t){var i=t.timestamp;return[s("div",{staticClass:"row justify-center"},[e._l(e.eventsMap[i.date],(function(t,i){return[t.time?s("q-badge",{key:i,staticClass:"q-ma-xs",class:e.badgeClasses(t,"header"),staticStyle:{width:"10px","max-width":"10px",height:"10px","max-height":"10px"},style:e.badgeStyles(t,"header")}):s("q-badge",{key:i,class:e.badgeClasses(t,"header"),staticStyle:{width:"100%",cursor:"pointer"},style:e.badgeStyles(t,"header")},[t.icon?s("q-icon",{staticClass:"q-mr-xs",attrs:{name:t.icon}}):e._e(),s("span",{staticClass:"ellipsis"},[e._v(e._s(t.title))])],1)]}))],2)]}},{key:"day",fn:function(t){var i=t.timestamp;return[e._l(e.getEvents(i.date),(function(t,i){return[s("q-badge",{key:i,class:e.badgeClasses(t,"day"),staticStyle:{width:"100%",cursor:"pointer",height:"16px","max-height":"16px"},style:e.badgeStyles(t,"day"),on:{click:function(s){return e.onEventClick(t)}}},[t.icon?s("q-icon",{staticClass:"q-mr-xs",attrs:{name:t.icon}}):e._e(),s("span",{staticClass:"ellipsis"},[e._v(e._s(t.title))])],1)]}))]}},{key:"day-body",fn:function(t){var i=t.timestamp,a=t.timeStartPos,n=t.timeDurationHeight;return[e._l(e.getEvents(i.date),(function(t,i){return[t.time?s("q-badge",{key:i,staticClass:"my-event justify-center ",class:e.badgeClasses(t,"body"),staticStyle:{cursor:"pointer"},style:e.badgeStyles(t,"body",a,n),on:{click:function(s){return e.onEventClick(t)}}},[t.icon?s("q-icon",{staticClass:"q-mr-xs",attrs:{name:t.icon}}):e._e(),s("span",{staticClass:"ellipsis"},[e._v(e._s(t.title))])],1):e._e()]}))]}}],null,!1,3364257485),model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}}):s("q-calendar",{ref:"calendar",staticClass:"calendar-container patient",attrs:{view:e.view.value,locale:"en-us",animated:"",bordered:!0,"interval-height":50,"interval-start":8,"interval-count":10,weekdays:[1,2,3,4,5,6,0],"transition-prev":"slide-right","transition-next":"slide-left"},scopedSlots:e._u([{key:"day-header",fn:function(t){var i=t.timestamp;return[s("div",{staticClass:"row justify-center"},[e._l(e.eventsMap[i.date],(function(t,i){return[t.time?s("q-badge",{key:i,staticClass:"q-ma-xs",class:e.badgeClasses(t,"header"),staticStyle:{width:"10px","max-width":"10px",height:"10px","max-height":"10px"},style:e.badgeStyles(t,"header")}):s("q-badge",{key:i,class:e.badgeClasses(t,"header"),staticStyle:{width:"100%",cursor:"pointer"},style:e.badgeStyles(t,"header")},[t.icon?s("q-icon",{staticClass:"q-mr-xs",attrs:{name:t.icon}}):e._e(),s("span",{staticClass:"ellipsis"},[e._v(e._s(t.title))])],1)]}))],2)]}},{key:"day",fn:function(t){var i=t.timestamp;return[e._l(e.getEvents(i.date),(function(t,i){return[s("q-badge",{key:i,class:e.badgeClasses(t,"day"),staticStyle:{width:"100%",cursor:"pointer",height:"16px","max-height":"16px"},style:e.badgeStyles(t,"day"),on:{click:function(s){return e.onEventClick(t)}}},[t.icon?s("q-icon",{staticClass:"q-mr-xs",attrs:{name:t.icon}}):e._e(),s("span",{staticClass:"ellipsis"},[e._v(e._s(t.title))])],1)]}))]}},{key:"day-body",fn:function(t){var i=t.timestamp,a=t.timeStartPos,n=t.timeDurationHeight;return[e._l(e.getEvents(i.date),(function(t,i){return[t.time?s("q-badge",{key:i,staticClass:"my-event justify-center ",class:e.badgeClasses(t,"body"),staticStyle:{cursor:"pointer"},style:e.badgeStyles(t,"body",a,n),on:{click:function(s){return e.onEventClick(t)}}},[t.icon?s("q-icon",{staticClass:"q-mr-xs",attrs:{name:t.icon}}):e._e(),s("span",{staticClass:"ellipsis"},[e._v(e._s(t.title))])],1):e._e()]}))]}}]),model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}}),s("q-dialog",{model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[s("q-card",{staticStyle:{width:"80%"}},[s("q-toolbar",{staticClass:"q-mt-md row"},[s("q-avatar",[s("q-icon",{attrs:{name:"local_hospital",size:"lg"}})],1),s("q-toolbar-title",{staticClass:"text-weight-bold"},[e._v("Appointment reservation\n        ")]),e.selectedUrl?s("div",{staticClass:"row justify-center items-center"},[s("q-toolbar-title",[e._v(" Join room ")]),s("q-btn",{attrs:{icon:"videocam",color:"primary",size:"lg",fill:"",type:"a",round:"",target:"_blank",dense:""},on:{click:function(t){return e.onClickUrl(e.selectedUrl)}}})],1):e._e()],1),s("div",{staticClass:"row "},[s("q-card-section",{staticClass:"column"},[s("p",{staticClass:"q-ml-sm  q-ma-xs text-body1 text-weight-bold"},[e._v("\n            Service details:\n          ")]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Name: "),s("b",[e._v(e._s(e.selectedEvent.service.name))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Category: "),s("b",[e._v(e._s(e.selectedEvent.service.category))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Description: "),s("b",[e._v(e._s(e.selectedEvent.service.description))])])]),s("q-card-section",{staticClass:"q-ml-xl column"},[s("p",{staticClass:"q-ml-sm  q-ma-xs text-body1 text-weight-bold"},[e._v("\n            Reservation details:\n          ")]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Date: "),s("b",[e._v(e._s(e.selectedEvent.date))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Time: "),s("b",[e._v(e._s(e.selectedEvent.time))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Duration: "),s("b",[e._v(e._s(e.selectedEvent.duration)+" minutes")])])])],1),e.isHis?s("q-card-section",[s("q-input",{staticClass:"q-ml-sm",attrs:{filled:"",readonly:!e.isMedic,label:"Observations",autogrow:""},model:{value:e.selectedObservation,callback:function(t){e.selectedObservation=t},expression:"selectedObservation"}})],1):e._e(),e.isMedic&&e.isHis?e._e():s("q-card-section",{staticClass:" column"},[s("p",{staticClass:"q-ml-sm  q-ma-xs text-body1 text-weight-bold"},[e._v("\n          Medic details:\n        ")]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n          Name:\n          "),s("b",[e._v(e._s(e.selectedEvent.medic.firstName)+"\n            "+e._s(e.selectedEvent.medic.lastName))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n          Phone: "),s("b",[e._v(e._s(e.selectedEvent.medic.phone))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n          Email: "),s("b",[e._v(e._s(e.selectedEvent.medic.email))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n          City: "),s("b",[e._v(e._s(e.selectedEvent.medic.city))])]),s("q-input",{staticClass:"q-ml-xl q-ma-none",staticStyle:{width:"80%"},attrs:{outlined:"",dense:!0,readonly:""},model:{value:e.selectedEvent.medic.info,callback:function(t){e.$set(e.selectedEvent.medic,"info",t)},expression:"selectedEvent.medic.info"}})],1),e.isMedic&&e.isHis?s("q-card-section",{staticClass:" column"},[s("p",{staticClass:"q-ml-sm  q-ma-xs text-body1 text-weight-bold"},[e._v("\n          Patient details:\n        ")]),e.selectedPatientInfo?s("div",[s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Name:\n            "),s("b",[e._v(e._s(e.selectedPatientInfo.firstName)+"\n              "+e._s(e.selectedPatientInfo.lastName))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Phone: "),s("b",[e._v(e._s(e.selectedPatientInfo.phone))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Email: "),s("b",[e._v(e._s(e.selectedPatientInfo.email))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            City: "),s("b",[e._v(e._s(e.selectedPatientInfo.city))])]),s("p",{staticClass:"q-ml-xl q-ma-none"},[e._v("\n            Birth date: "),s("b",[e._v(e._s(e.selectedPatientInfo.birthDate))])]),s("q-input",{staticClass:"q-ml-xl q-ma-none",staticStyle:{width:"80%"},attrs:{outlined:"",dense:!0,readonly:""},model:{value:e.selectedPatientInfo.info,callback:function(t){e.$set(e.selectedPatientInfo,"info",t)},expression:"selectedPatientInfo.info"}})],1):s("p",{staticClass:"q-ml-xl  q-ma-xs"},[e._v("Not reserved yet")])]):e._e(),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),e.isMedic?e._e():s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{fill:"",label:"OPEN"!=e.selectedEvent.status&&e.isHis?"UNRESERVE":"RESERVE",disabled:"OPEN"!=e.selectedEvent.status&&!e.isHis,color:"OPEN"!=e.selectedEvent.status&&e.isHis?"red":"primary"},on:{click:function(t){return e.executeReserve()}}}),e.isMedic&&e.isHis?s("q-btn",{attrs:{fill:"",label:"Delete",color:"red"},on:{click:function(t){e.confirmDelete=!0}}}):e._e(),e.isMedic&&e.isHis?s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{fill:"",label:"Update",color:"primary"},on:{click:function(t){return e.executeUpdate()}}}):e._e()],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:e.confirmDelete,callback:function(t){e.confirmDelete=t},expression:"confirmDelete"}},[s("q-card",[s("q-toolbar",{staticClass:"row items-center"},[s("q-avatar",{attrs:{icon:"warning",color:"warning","text-color":"white"}}),s("span",{staticClass:"q-ml-sm"},[e._v("Deleting an appointment is an irreversible command. Be\n          cautious.")])],1),s("q-card-section",[e._v("Are you sure you want to delete the appointment of\n        "),s("b",[e._v(e._s(e.selectedEvent.service.name))]),e._v(" from "),s("br"),s("b",[e._v("Date: "+e._s(e.selectedEvent.date)+" at "+e._s(e.selectedEvent.time))]),e._v("?\n      ")]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),s("q-btn",{attrs:{fill:"",label:"Confirm delete",color:"red"},on:{click:function(t){return e.executeDeleteAppointment()}}})],1)],1)],1),s("q-dialog",{model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("q-card",{staticStyle:{width:"100%"}},[s("q-toolbar",[s("q-toolbar-title",{staticClass:"text-weight-bold"},[e._v("Create an appointment\n        ")])],1),s("q-card-section",[s("q-select",{attrs:{flat:"",options:e.medicServices,label:"Service"},model:{value:e.newEvent.service,callback:function(t){e.$set(e.newEvent,"service",t)},expression:"newEvent.service"}})],1),s("q-card-section",[s("div",{staticClass:"q-gutter-md row justify-around"},[s("q-date",{attrs:{mask:"YYYY-MM-DDTHH:mm"},model:{value:e.newEvent.dateTime,callback:function(t){e.$set(e.newEvent,"dateTime",t)},expression:"newEvent.dateTime"}}),s("q-time",{attrs:{mask:"YYYY-MM-DDTHH:mm"},model:{value:e.newEvent.dateTime,callback:function(t){e.$set(e.newEvent,"dateTime",t)},expression:"newEvent.dateTime"}})],1)]),s("q-card-section",[s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("p",[e._v("\n              Duration: "),s("b",[e._v(e._s(e.newEvent.duration)+" minutes")])])]),s("q-item-section",[s("q-slider",{attrs:{label:"",markers:"",step:10,min:10,max:120},model:{value:e.newEvent.duration,callback:function(t){e.$set(e.newEvent,"duration",t)},expression:"newEvent.duration"}})],1)],1)],1),s("q-card-section",[s("q-input",{attrs:{flat:"",type:"url",label:"URL"},model:{value:e.newEvent.url,callback:function(t){e.$set(e.newEvent,"url",t)},expression:"newEvent.url"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),s("q-btn",{attrs:{fill:"",label:"Add",color:"primary"},on:{click:function(t){return e.executeAddEvent()}}})],1)],1)],1),e.isMedic?s("div",{staticClass:"q-mt-md row justify-around"},[s("q-badge",{staticClass:"q-pa-sm",attrs:{color:"blue"}},[e._v("\n      Other medics appointment with no reservation ")]),s("q-badge",{staticClass:"q-pa-sm",attrs:{color:"grey"}},[e._v("\n      Other medics appointment reserved already ")]),s("q-badge",{staticClass:"q-pa-sm",attrs:{color:"teal"}},[e._v("\n      My appointment without reservation yet ")]),s("q-badge",{staticClass:"q-pa-sm",attrs:{color:"green"}},[e._v("\n      My appointment with reservation\n    ")])],1):s("div",{staticClass:"q-mt-md row justify-around"},[s("q-badge",{staticClass:"q-pa-sm",attrs:{color:"blue"}},[e._v("\n      Appointments available to reserve ")]),s("q-badge",{staticClass:"q-pa-sm",attrs:{color:"green"}},[e._v("\n      My reserved appointments\n    ")])],1)],1)},O=[],D=(s("a481"),s("4917"),s("7514"),s("6d67"),s("20d6"),s("b06b")),A=s("fe7a");function j(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function N(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?j(Object(s),!0).forEach((function(t){c()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function M(e){if("string"!==typeof e)throw new TypeError("Expected a string");e=e.replace(/^#/,""),3===e.length?e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:4===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var t=parseInt(e,16);return e.length>6?{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:Math.round((255&t)/2.55)}:{r:t>>16,g:t>>8&255,b:255&t}}function T(e){if("string"!==typeof e&&(!e||void 0===e.r))throw new TypeError("Expected a string or a {r, g, b} object as color");var t="string"===typeof e?M(e):e,s=t.r/255,i=t.g/255,a=t.b/255,n=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4),r=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),o=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4);return.2126*n+.7152*r+.0722*o}var Q={name:"Appointment",data:function(){return{confirmDelete:!1,onlyHis:!1,selectedMedics:[],selectedServices:[],selectedPatients:[],optionsServices:[],optionsMedics:[],optionsPatients:[],dialog:!1,newEvent:{duration:20,dateTime:"",url:"",service:{label:"",value:""}},selectedEvent:{id:3,duration:20,date:"2021-05-25",time:"10:10",medic:{id:1,firstName:"George",lastName:"Vasile",info:null,email:"george.vasile2@gmail.com",phone:"0722222222",city:"Bucharest"},service:{id:1,name:"ceva",category:"analiza",description:"altceva",createdAt:"2021-05-23T22:51:58.000Z",updatedAt:"2021-05-23T22:51:58.000Z"},status:"OPEN"},selectedObservation:"",selectedDate:"",confirm:!1,title:"",view:{value:"month",label:"MONTH"},viewOptions:[{value:"day",label:"DAY"},{value:"week",label:"WEEK"},{value:"month",label:"MONTH"}]}},beforeMount:function(){var e=this.$q.localStorage.getItem("user");e?(this.$store.dispatch("data/loadAppointments"),this.$store.dispatch("data/loadMedicServices"),this.$store.dispatch("data/loadServices"),"medic"==e.type&&this.$store.dispatch("data/loadMedicAppointments"),"patient"==e.type&&this.$store.dispatch("data/loadPatientAppointments")):this.$router.push("/auth")},methods:{executeDeleteAppointment:function(){var e=this;this.$axios.put("/api/appointments/medic/".concat(this.selectedEvent.id),{cancel:!0}).then((function(t){e.$q.notify({color:"primary",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadAppointments"),e.$store.dispatch("data/loadMedicServices"),e.$store.dispatch("data/loadMedicAppointments"),e.confirm=!1,e.confirmDelete=!1})).catch((function(t){switch(t.response.status){case 401:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message}),e.confirmDelete=!1}}))},executeUpdate:function(){var e=this;this.$axios.put("/api/appointments/medic/".concat(this.selectedEvent.id),{observation:this.selectedObservation}).then((function(t){e.$q.notify({color:"primary",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadAppointments"),e.$store.dispatch("data/loadMedicServices"),e.$store.dispatch("data/loadMedicAppointments"),e.card=!1})).catch((function(t){switch(t.response.status){case 401:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}}))},filterServices:function(e,t){var s=this;t(""!==e?function(){var t=e.toLowerCase();s.optionsServices=s.services.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}:function(){s.optionsServices=s.services})},filterMedics:function(e,t){var s=this;t(""!==e?function(){var t=e.toLowerCase();s.optionsMedics=s.medics.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}:function(){s.optionsMedics=s.medics})},filterPatients:function(e,t){var s=this;t(""!==e?function(){var t=e.toLowerCase();s.optionsPatients=s.patients.filter((function(e){return e.label.toLowerCase().indexOf(t)>-1}))}:function(){s.optionsPatients=s.patients})},executeAddEvent:function(){var e=this;this.$axios.post("/api/appointments/medic",{url:this.newEvent.url,date:new Date(Date.parse(this.newEvent.dateTime)),duration:this.newEvent.duration,serviceId:this.newEvent.service.value}).then((function(t){e.$q.notify({color:"primary",message:t.data.message,icon:"arrow_forward"}),e.dialog=!1,e.$store.dispatch("data/loadAppointments"),e.$store.dispatch("data/loadMedicServices"),e.$store.dispatch("data/loadMedicAppointments")})).catch((function(t){switch(t.response.status){case 401:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}}))},onEventClick:function(e){this.dialog||(this.selectedEvent=N({},e),this.confirm=!0)},executeReserve:function(){var e=this;this.$axios.put("/api/appointments/".concat(this.selectedEvent.id)).then((function(t){e.$q.notify({color:"primary",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadAppointments"),e.$store.dispatch("data/loadPatientAppointments")})).catch((function(t){switch(t.response.status){case 401:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}e.$store.dispatch("data/loadAppointments")}))},onClickTime:function(e){this.confirm||(this.dialog=!0,this.newEvent.dateTime="".concat(e.scope.timestamp.date,"T").concat(e.scope.timestamp.time?e.scope.timestamp.time:"08:00"))},calendarNext:function(){this.$refs.calendar.next()},calendarPrev:function(){this.$refs.calendar.prev()},isCssColor:function(e){return!!e&&!!e.match(/^(#|(rgb|hsl)a?\()/)},badgeClasses:function(e,t){var s,i=this.isCssColor(e.bgcolor),a="header"===t;return s={},c()(s,"text-white bg-".concat(e.bgcolor),!i),c()(s,"full-width",!a&&(!e.side||"full"===e.side)),c()(s,"left-side",!a&&"left"===e.side),c()(s,"right-side",!a&&"right"===e.side),s},badgeStyles:function(e,t,s,i){var a={};return this.isCssColor(e.bgcolor)&&(a["background-color"]=e.bgcolor,a.color=T(e.bgcolor)>.5?"black":"white"),s&&(a.top=s(e.time)+"px"),i&&(a.height=i(e.duration)+"px"),a["align-items"]="flex-start",a},getEvents:function(e){for(var t=A["a"].parseTimestamp(e),s=[],i=0;i<this.events.length;++i){var a=!1;if(this.events[i].date===e){if(this.events[i].time&&s.length>0)for(var n=A["a"].parseTimestamp(this.events[i].date+" "+this.events[i].time),r=A["a"].addToDate(n,{minute:this.events[i].duration}),o=0;o<s.length;++o)if(s[o].time){var c=A["a"].parseTimestamp(s[o].date+" "+s[o].time),l=A["a"].addToDate(c,{minute:s[o].duration});if(A["a"].isBetweenDates(n,c,l)||A["a"].isBetweenDates(r,c,l)){s[o].side="left",this.events[i].side="right",s.push(this.events[i]),a=!0;break}}a||(this.events[i].side=void 0,s.push(this.events[i]))}else if(this.events[i].days){var d=A["a"].parseTimestamp(this.events[i].date),u=A["a"].addToDate(d,{day:this.events[i].days});A["a"].isBetweenDates(t,d,u)&&(s.push(this.events[i]),a=!0)}}return s},isHisById:function(e){return"medic"==this.$q.localStorage.getItem("user").type?!!this.medicEvents.find((function(t){return t.id==e})):!!this.patientEvents.find((function(t){return t.id==e}))},onClickUrl:function(e){Object(D["a"])(e)}},computed:{isHis:function(){var e=this;return"medic"==this.$q.localStorage.getItem("user").type?!!this.medicEvents.find((function(t){return t.id==e.selectedEvent.id})):!!this.patientEvents.find((function(t){return t.id==e.selectedEvent.id}))},isMedic:function(){return!!this.$q.localStorage.getItem("user")&&"medic"==this.$q.localStorage.getItem("user").type},eventsMap:function(){var e={};return this.events.forEach((function(t){return(e[t.date]=e[t.date]||[]).push(t)})),e},medicEvents:function(){return this.$store.getters["data/getMedicAppointments"]},patientEvents:function(){return this.$store.getters["data/getPatientAppointments"]},selectedPatientInfo:function(){var e=this,t=this.medicEvents.find((function(t){return e.selectedEvent&&t.id==e.selectedEvent.id}));return this.selectedObservation=t.observation,t?t.patient:{}},selectedUrl:function(){var e=this;if(this.isHis){var t=this.isMedic?this.medicEvents.find((function(t){return t.id==e.selectedEvent.id})):this.patientEvents.find((function(t){return t.id==e.selectedEvent.id}));return t&&!this.isMedic&&(this.selectedObservation=t.observation),t?t.url:""}return""},events:function(){var e=this;return this.$store.getters["data/getAppointments"].filter((function(t){return 0==e.selectedMedics.length||e.selectedMedics.find((function(e){return e.value==t.medic.id}))})).filter((function(t){if(0==e.selectedPatients.length)return!0;var s=e.medicEvents.find((function(e){return e.id==t.id}));return!(!s||!s.patient)&&e.selectedPatients.find((function(e){return e.value==s.patient.id}))})).filter((function(t){return 0==e.selectedServices.length||e.selectedServices.find((function(e){return e.value==t.service.id}))})).filter((function(t){return!e.onlyHis||e.isHisById(t.id)})).map((function(t){var s=null,i="medic"==e.$q.localStorage.getItem("user").type?!!e.medicEvents.find((function(e){return e.id==t.id})):!!e.patientEvents.find((function(e){return t&&e.id==t.id}));return t&&("OPEN"==t.status||i?"OPEN"!=t.status&&i?s="#006400":"OPEN"!=t.status||i?"OPEN"==t.status&&i&&(s="#009688"):s="#027be3":s="#696969"),N(N({},t),{},{title:t?"".concat(t.service.name," - ").concat(t.medic.firstName," ").concat(t.medic.lastName):"",bgcolor:s})}))},medicServices:function(){var e=this.$q.localStorage.getItem("user"),t=this.$store.getters["data/getMedicServices"].find((function(t){return t.id==e.id}));return t?t.services.map((function(e){return{value:e.id,label:e.name}})):[]},services:function(){return this.$store.getters["data/getServices"].map((function(e){return{label:"".concat(e.name),value:e.id}}))},medics:function(){return this.$store.getters["data/getMedicServices"].map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:e.id}}))},patients:function(){return this.$store.getters["data/getMedicAppointments"].map((function(e){return e.patient})).filter((function(e){return!!e})).filter((function(e,t,s){return s.findIndex((function(t){return t.id===e.id}))===t})).map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:e.id}}))}}},I=Q,H=(s("870e"),s("76ac"),s("ddd8")),B=s("eb85"),R=s("8f8e"),V=s("58a8"),U=s("4b7e"),z=s("52ee"),L=s("ca78"),W=s("66e5"),Y=s("4074"),G=s("c1d0"),Z=s("7f67"),F=Object(m["a"])(I,P,O,!1,null,"160f010f",null),J=F.exports;k()(F,"components",{QSelect:H["a"],QSeparator:B["a"],QCheckbox:R["a"],QBtn:h["a"],QBadge:V["a"],QIcon:b["a"],QDialog:y["a"],QCard:q["a"],QToolbar:x["a"],QAvatar:_["a"],QToolbarTitle:w["a"],QCardSection:S["a"],QInput:v["a"],QCardActions:U["a"],QDate:z["a"],QTime:L["a"],QItem:W["a"],QItemSection:Y["a"],QSlider:G["a"]}),k()(F,"directives",{ClosePopup:Z["a"]});var K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("q-header",{attrs:{elevated:""}},[s("q-toolbar",[s("q-toolbar-title",[e._v("Medical Center")]),s("q-btn",{staticStyle:{"margin-right":"50px"},attrs:{color:"white","text-color":"primary",label:"Profile"},on:{click:function(t){e.userEdit=!1,e.profile=!0}}}),s("q-btn",{attrs:{color:"white","text-color":"black",label:"Log out"},on:{click:e.onLogout}})],1)],1),s("q-dialog",{staticStyle:{width:"60%"},model:{value:e.profile,callback:function(t){e.profile=t},expression:"profile"}},[s("q-card",{staticClass:"my-card full-width"},[s("q-card-section",{staticClass:"row text-h5 ellipsis"},[s("div",{staticClass:"col-3 text-grey text-uppercase text-bold",staticStyle:{width:"83%"}},[e._v("\n          "+e._s(e.user.type)+"\n        ")]),s("div",{staticClass:"col-2",attrs:{align:"right"}},[e.userEdit?s("q-btn",{attrs:{color:"primary",round:"",outline:"",icon:"clear"},on:{click:function(t){e.userEdit=!1,e.isPassword=!1}}}):s("q-btn",{attrs:{color:"primary",round:"",outline:"",icon:"create"},on:{click:function(t){e.userEdit=!0,e.isPassword=!1}}})],1)]),s("q-card-section",[s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("First name:")]),e.userEdit?s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"First name"},model:{value:e.user.firstName,callback:function(t){e.$set(e.user,"firstName",t)},expression:"user.firstName"}}):s("div",{staticClass:"col-9 text-dark"},[e._v("\n            "+e._s(e.user.firstName)+"\n          ")])],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Last name:")]),e.userEdit?s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Last name"},model:{value:e.user.lastName,callback:function(t){e.$set(e.user,"lastName",t)},expression:"user.lastName"}}):s("div",{staticClass:"col-9 text-dark"},[e._v("\n            "+e._s(e.user.lastName)+"\n          ")])],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Email:")]),e.userEdit?s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}):s("div",{staticClass:"col-9 text-dark"},[e._v(e._s(e.user.email))])],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Phone:")]),e.userEdit?s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",mask:"0### ### ###",dense:"",label:"Phone"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}}):s("div",{staticClass:"col-9 text-dark"},[e._v(e._s(e.user.phone))])],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("City:")]),e.userEdit?s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"City"},model:{value:e.user.city,callback:function(t){e.$set(e.user,"city",t)},expression:"user.city"}}):s("div",{staticClass:"col-9 text-dark"},[e._v(e._s(e.user.city))])],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Birth date:")]),e.userEdit?s("q-input",{staticClass:"col-9",attrs:{type:"text",mask:"date",outlined:"",dense:"",rules:["date"],label:"Birth date"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{model:{value:e.user.birthDate,callback:function(t){e.$set(e.user,"birthDate",t)},expression:"user.birthDate"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.user.birthDate,callback:function(t){e.$set(e.user,"birthDate",t)},expression:"user.birthDate"}}):s("div",{staticClass:"col-9 text-dark"},[e._v("\n            "+e._s(e.user.birthDate)+"\n          ")])],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Info:")]),e.userEdit?s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",autogrow:"",label:"Info"},model:{value:e.user.info,callback:function(t){e.$set(e.user,"info",t)},expression:"user.info"}}):s("div",{staticClass:"col-9 text-dark"},[e._v(e._s(e.user.info))])],1),e.isPassword?s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Password:")]),s("q-input",{staticClass:"col-9",attrs:{outlined:"",label:"Password",dense:"",type:e.isPwd?"password":"text"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}],null,!1,3635466494),model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e()]),s("q-card-section",[e.userEdit?s("q-card-actions",{attrs:{align:"around"}},[e.isPassword?s("q-btn",{attrs:{icon:"clear",outline:"",color:"primary"},on:{click:function(t){e.isPassword=!1}}},[e._v("Password")]):s("q-btn",{attrs:{outline:"",color:"primary"},on:{click:function(t){e.isPassword=!0}}},[e._v("Change password")]),s("q-btn",{attrs:{icon:"save",outline:"",color:"primary"},on:{click:e.executeSaveUser}},[e._v("Save changes")])],1):s("q-card-actions",{attrs:{align:"around"}},[s("q-btn",{attrs:{outline:"",color:"negative"},on:{click:function(t){return e.deleteAccount()}}},[e._v("Delete account")])],1)],1)],1)],1)],1)},X=[];function ee(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function te(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(s),!0).forEach((function(t){c()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ee(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var se={name:"Navbar",data:function(){return{isPassword:!1,isPwd:!0,password:"",profile:!1,user:{},userEdit:!1,state:"VIEW"}},beforeMount:function(){this.user=this.$q.localStorage.getItem("user"),this.user||this.$router.push("/auth")},methods:{deleteAccount:function(){var e=this;this.$q.dialog({title:"Confirmation",message:"Are you sure you want to delete your account?",cancel:!0,persistent:!0}).onOk((function(){e.$axios.delete("/api/user").then((function(t){e.$q.notify({color:"primary",message:t.data.message,icon:"arrow_forward"}),e.$q.localStorage.set("user",!1),e.$router.push("/auth")})).catch((function(t){switch(t.response.status){case 400:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}}))}))},executeSaveUser:function(){var e=this;this.$axios.put("/api/user",te(te({},this.user),{},{password:this.password,changePassword:this.isPassword})).then((function(t){e.$q.notify({color:"primary",message:t.data.message,icon:"arrow_forward"}),e.$q.localStorage.set("user",t.data.user),e.user=t.data.user,e.userEdit=!1,e.isPassword=!1})).catch((function(t){switch(t.response.status){case 400:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}}))},onLogout:function(){var e=this;this.$axios.get("/api/logout").then((function(t){e.$q.notify({color:"primary",message:t.data.message}),e.$q.localStorage.set("user",!1),e.$router.push("/auth")})).catch((function(t){e.$q.notify({color:"negative",message:t.response.data.message})}))}}},ie=se,ae=s("e359"),ne=s("7cbe"),re=Object(m["a"])(ie,K,X,!1,null,null,null),oe=re.exports;k()(re,"components",{QHeader:ae["a"],QToolbar:x["a"],QToolbarTitle:w["a"],QBtn:h["a"],QDialog:y["a"],QCard:q["a"],QCardSection:S["a"],QInput:v["a"],QIcon:b["a"],QPopupProxy:ne["a"],QDate:z["a"],QCardActions:U["a"]}),k()(re,"directives",{ClosePopup:Z["a"]});var ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("q-table",{staticStyle:{margin:"50px"},attrs:{title:"Available services",data:e.services,filter:e.filter,columns:e.isAdmin?e.columns.filter((function(e){return"offer"!=e.name})):e.columns.filter((function(e){return"actions"!=e.name})),"row-key":"name"},scopedSlots:e._u([{key:"top-right",fn:function(){return[s("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-actions",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("q-btn",{staticClass:"button",staticStyle:{"margin-right":"20px"},attrs:{outline:"",round:"",color:"primary",icon:"create"},on:{click:function(s){return e.editService(t.row)}}}),s("q-btn",{staticClass:"button",attrs:{outline:"",round:"",color:"negative",icon:"delete"},on:{click:function(s){return e.removeService(t.row)}}})],1)]}},{key:"body-cell-offer",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("div",{staticClass:"text-pre-wrap"},[s("q-toggle",{attrs:{"checked-icon":"check","unchecked-icon":"clear"},on:{input:function(s){return e.updateOffer(t.row.id)}},model:{value:t.row.offer,callback:function(s){e.$set(t.row,"offer",s)},expression:"props.row.offer"}})],1)])]}},e.isAdmin?{key:"top-left",fn:function(){return[s("q-btn",{attrs:{color:"primary",label:"ADD",outline:""},on:{click:e.addService}}),s("q-space")]},proxy:!0}:null],null,!0)}),s("q-dialog",{staticStyle:{width:"60%"},model:{value:e.card,callback:function(t){e.card=t},expression:"card"}},[s("q-card",{staticClass:"my-card full-width"},[s("q-card-section",{staticClass:"row text-h5 ellipsis"},["ADD"===e.state?s("div",{staticClass:"col-3 text-grey"},[e._v("\n          Add service\n        ")]):s("div",{staticClass:"col-3 text-grey"},[e._v("Edit service")])]),s("q-card-section",[s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Name:")]),s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Name"},model:{value:e.selectedService.name,callback:function(t){e.$set(e.selectedService,"name",t)},expression:"selectedService.name"}})],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Description:")]),s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Description"},model:{value:e.selectedService.description,callback:function(t){e.$set(e.selectedService,"description",t)},expression:"selectedService.description"}})],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Category:")]),s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Category"},model:{value:e.selectedService.category,callback:function(t){e.$set(e.selectedService,"category",t)},expression:"selectedService.category"}})],1)]),s("q-card-section",[s("q-card-actions",{attrs:{align:"around"}},["ADD"===e.state?s("q-btn",{attrs:{icon:"add",outline:"",color:"primary"},on:{click:e.executeAddService}},[e._v("Add")]):s("q-btn",{attrs:{icon:"create",outline:"",color:"primary"},on:{click:e.executeSaveService}},[e._v("Edit")])],1)],1)],1)],1)],1)},le=[];function de(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function ue(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?de(Object(s),!0).forEach((function(t){c()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):de(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var pe={name:"Service",data:function(){var e=this;return{state:"VIEW",tab:"services",filter:"",card:!1,editMedicService:"",selectedService:{},categoryOptions:["consultație fizica","consultație online","recoltare analize","interpretare analize"],servicesOptions:["Cardiologie","Dermatologie","Endocrinologie","Gastroenterologie","Medicina de familie","Nefrologie","Ofltalmologie","Orl","Ortopedie","Psihologie"],descriptionOptions:["Pentru toate persoanele","Pentru adulti","Pentru copii"],columns:[{name:"name",required:!0,label:"Name",align:"left",field:function(e){return e.name},format:function(e){return"".concat(e)},sortable:!0},{name:"description",required:!0,label:"Description",align:"left",field:function(e){return e.description},format:function(e){return"".concat(e)},sortable:!0},{name:"category",required:!0,label:"Category",align:"left",field:function(e){return e.category},format:function(e){return"".concat(e)},sortable:!0},{name:"offer",required:!0,label:"Offering this service?",align:"left",field:function(t){return e.medicServices.find((function(e){return e.id==t.id}))},format:function(e){return"".concat(e?"YES":"NO")},sortable:!0},{name:"actions",label:"Action"}]}},beforeMount:function(){var e=this.$q.localStorage.getItem("user");e?(this.$store.dispatch("data/loadServices"),this.$store.dispatch("data/loadMedicServices")):this.$router.push("/auth")},methods:{addService:function(){this.state="ADD",this.card=!0,this.selectedService={name:"",description:"",category:""}},editService:function(e){this.state="EDIT",this.card=!0,this.selectedService=ue({},e)},removeService:function(e){var t=this;this.$q.dialog({title:"Confirmation",message:"Do you want to delete ".concat(e.name,"?"),cancel:!0,persistent:!0}).onOk((function(){t.$axios.delete("/api/services/".concat(e.id)).then((function(e){t.$q.notify({color:"primary",message:e.data.message,icon:"arrow_forward"}),t.$store.dispatch("data/loadServices"),t.$store.dispatch("data/loadAllExperiences")})).catch((function(e){switch(e.response.status){case 400:e.response.data.errors.forEach((function(e){t.$q.notify({color:"negative",message:e})}));break;default:t.$q.notify({color:"negative",message:e.response.data.message})}}))}))},executeSaveService:function(){var e=this;this.$axios.put("/api/services/".concat(this.selectedService.id),ue({},this.selectedService)).then((function(t){e.$q.notify({color:"primary",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadServices"),e.$store.dispatch("data/loadMedicServices"),e.card=!1})).catch((function(t){switch(t.response.status){case 400:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}}))},executeAddService:function(){var e=this;this.$axios.post("/api/services",ue({},this.selectedService)).then((function(t){e.$q.notify({color:"primary",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadServices"),e.$store.dispatch("data/loadMedicServices"),e.card=!1})).catch((function(t){switch(t.response.status){case 400:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}}))},updateOffer:function(e){var t=this;this.$axios.put("/api/services/medic",{serviceId:e}).then((function(e){t.$store.dispatch("data/loadMedicServices"),t.$q.notify({color:"primary",message:e.data.message,icon:"arrow_forward"})})).catch((function(e){switch(e.response.status){case 400:e.response.data.errors.forEach((function(e){t.$q.notify({color:"negative",message:e})}));break;default:t.$q.notify({color:"negative",message:e.response.data.message})}}))},hasOffer:function(e){return!!this.medicServices.find((function(t){return t.id==e}))}},computed:{isMedic:function(){return!!this.$q.localStorage.getItem("user")&&"medic"==this.$q.localStorage.getItem("user").type},isAdmin:function(){return!!this.$q.localStorage.getItem("user")&&"admin"==this.$q.localStorage.getItem("user").type},services:function(){var e=this;return this.$store.getters["data/getServices"].map((function(t){return ue(ue({},t),{},{offer:e.hasOffer(t.id)})}))},medicServices:function(){var e=this.$q.localStorage.getItem("user"),t=this.$store.getters["data/getMedicServices"].find((function(t){return t.id==e.id}));return t?t.services:[]}}},me=pe,fe=s("9564"),ve=s("2c91"),be=Object(m["a"])(me,ce,le,!1,null,null,null),ge=be.exports;k()(be,"components",{QTable:f["a"],QInput:v["a"],QIcon:b["a"],QTd:g["a"],QBtn:h["a"],QToggle:fe["a"],QSpace:ve["a"],QDialog:y["a"],QCard:q["a"],QCardSection:S["a"],QCardActions:U["a"]});var he=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("q-table",{staticStyle:{margin:"50px"},attrs:{title:"Available subscriptions",data:e.subscriptions,filter:e.filter,columns:e.columns,"row-key":"name"},scopedSlots:e._u([{key:"top-right",fn:function(){return[s("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-actions",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("q-btn",{staticClass:"button",staticStyle:{"margin-right":"20px"},attrs:{outline:"",round:"",color:"primary",icon:"create"},on:{click:function(s){return e.editSubscription(t.row)}}}),s("q-btn",{staticClass:"button",attrs:{outline:"",round:"",color:"negative",icon:"delete"},on:{click:function(s){return e.removeSubscription(t.row)}}})],1)]}},{key:"top-left",fn:function(){return[s("q-btn",{attrs:{color:"primary",label:"ADD",outline:""},on:{click:e.addSubscription}}),s("q-space")]},proxy:!0}])}),s("q-dialog",{staticStyle:{width:"60%"},model:{value:e.card,callback:function(t){e.card=t},expression:"card"}},[s("q-card",{staticClass:"my-card full-width"},[s("q-card-section",{staticClass:"row text-h5 ellipsis"},["ADD"===e.state?s("div",{staticClass:"col-3 text-grey"},[e._v("\n          Add subscription\n        ")]):s("div",{staticClass:"col-3 text-grey"},[e._v("Edit subscription")])]),s("q-card-section",[s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Name:")]),s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Type"},model:{value:e.selectedSubscription.type,callback:function(t){e.$set(e.selectedSubscription,"type",t)},expression:"selectedSubscription.type"}})],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Price percent:")]),s("q-input",{staticClass:"col-9",attrs:{type:"number",outlined:"",dense:"",label:"Price percent"},model:{value:e.selectedSubscription.pricePercent,callback:function(t){e.$set(e.selectedSubscription,"pricePercent",t)},expression:"selectedSubscription.pricePercent"}})],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Count:")]),s("q-input",{staticClass:"col-9",attrs:{type:"number",outlined:"",dense:"",label:"Count"},model:{value:e.selectedSubscription.count,callback:function(t){e.$set(e.selectedSubscription,"count",t)},expression:"selectedSubscription.count"}})],1)]),s("q-card-section",[s("q-card-actions",{attrs:{align:"around"}},["ADD"===e.state?s("q-btn",{attrs:{icon:"add",outline:"",color:"primary"},on:{click:e.executeAddSubscription}},[e._v("Add")]):s("q-btn",{attrs:{icon:"create",outline:"",color:"primary"},on:{click:e.executeSaveSubscription}},[e._v("Edit")])],1)],1)],1)],1)],1)},ye=[];function qe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function xe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(s),!0).forEach((function(t){c()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var _e={name:"Subscription",data:function(){return{state:"VIEW",tab:"subscriptions",filter:"",card:!1,editMedicSubscription:"",selectedSubscription:{},categoryOptions:["consultație fizica","consultație online","recoltare analize","interpretare analize"],subscriptionsOptions:["Cardiologie","Dermatologie","Endocrinologie","Gastroenterologie","Medicina de familie","Nefrologie","Ofltalmologie","Orl","Ortopedie","Psihologie"],descriptionOptions:["Pentru toate persoanele","Pentru adulti","Pentru copii"],columns:[{name:"type",required:!0,label:"Type",align:"left",field:function(e){return e.type},format:function(e){return"".concat(e)},sortable:!0},{name:"pricePercent",required:!0,label:"Price percent (%)",align:"left",field:function(e){return e.pricePercent},format:function(e){return"".concat(e,"%")},sortable:!0},{name:"count",required:!0,label:"Count",align:"left",field:function(e){return e.count},format:function(e){return"".concat(e)},sortable:!0},{name:"actions",label:"Action"}]}},beforeMount:function(){var e=this.$q.localStorage.getItem("user");e?this.$store.dispatch("data/loadSubscriptions"):this.$router.push("/auth")},methods:{addSubscription:function(){this.state="ADD",this.card=!0,this.selectedSubscription={type:"",pricePercent:"",count:""}},editSubscription:function(e){this.state="EDIT",this.card=!0,this.selectedSubscription=xe({},e)},removeSubscription:function(e){var t=this;this.$q.dialog({title:"Confirmation",message:"Do you want to delete ".concat(e.name,"?"),cancel:!0,persistent:!0}).onOk((function(){t.$axios.delete("/api/subscriptions/".concat(e.id)).then((function(e){t.$q.notify({color:"primary",message:e.data.message,icon:"arrow_forward"}),t.$store.dispatch("data/loadSubscriptions"),t.$store.dispatch("data/loadAllExperiences")})).catch((function(e){switch(e.response.status){case 400:e.response.data.errors.forEach((function(e){t.$q.notify({color:"negative",message:e})}));break;default:t.$q.notify({color:"negative",message:e.response.data.message})}}))}))},executeSaveSubscription:function(){var e=this;this.$axios.put("/api/subscriptions/".concat(this.selectedSubscription.id),xe({},this.selectedSubscription)).then((function(t){e.$q.notify({color:"primary",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadSubscriptions"),e.$store.dispatch("data/loadMedicSubscriptions"),e.card=!1})).catch((function(t){switch(t.response.status){case 400:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}}))},executeAddSubscription:function(){var e=this;this.$axios.post("/api/subscriptions",xe({},this.selectedSubscription)).then((function(t){e.$q.notify({color:"primary",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadSubscriptions"),e.card=!1})).catch((function(t){switch(t.response.status){case 400:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}}))}},computed:{subscriptions:function(){return this.$store.getters["data/getSubscriptions"]}}},we=_e,Se=Object(m["a"])(we,he,ye,!1,null,null,null),Ce=Se.exports;k()(Se,"components",{QTable:f["a"],QInput:v["a"],QIcon:b["a"],QTd:g["a"],QBtn:h["a"],QSpace:ve["a"],QDialog:y["a"],QCard:q["a"],QCardSection:S["a"],QCardActions:U["a"]});var ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("q-table",{staticStyle:{margin:"50px"},attrs:{title:"My subscriptions",data:e.patientSubscriptions,filter:e.filter,columns:e.columns,"row-key":"name"},scopedSlots:e._u([{key:"top-right",fn:function(){return[s("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-actions",fn:function(t){return[s("q-td",{attrs:{props:t}},[s("q-btn",{staticClass:"button",staticStyle:{"margin-right":"20px"},attrs:{outline:"",round:"",color:"primary",icon:"read_more"},on:{click:function(s){return e.viewSubscription(t.row)}}}),s("q-btn",{staticClass:"button",attrs:{outline:"",round:"",color:"negative",icon:"delete"},on:{click:function(s){return e.removeSubscription(t.row)}}})],1)]}},{key:"top-left",fn:function(){return[s("q-btn",{attrs:{color:"primary",label:"ADD",outline:""},on:{click:e.addSubscription}}),s("q-space")]},proxy:!0}])}),s("q-dialog",{staticStyle:{width:"60%"},model:{value:e.card,callback:function(t){e.card=t},expression:"card"}},[s("q-card",{staticClass:"my-card full-width"},[s("q-card-section",{staticClass:"row text-h5 ellipsis"},["ADD"===e.state?s("div",{staticClass:"col-3 text-grey"},[e._v("\n          Add subscription\n        ")]):s("div",{staticClass:"col-3 text-grey"},[e._v("\n          Subscription details ["+e._s(e.selectedSubscription.active?"ACTIVE":"NOT ACTIVE")+"]\n        ")])]),"ADD"==e.state?s("q-card-section",[s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Service category:")]),s("q-select",{staticClass:"col-9",attrs:{outlined:"",dense:"",options:e.categoryOptions,label:"Category"},model:{value:e.selectedSubscription.service.category,callback:function(t){e.$set(e.selectedSubscription.service,"category",t)},expression:"selectedSubscription.service.category"}})],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Service name:")]),s("q-select",{staticClass:"col-9",attrs:{outlined:"",dense:"",options:e.serviceOptions,label:"Name"},model:{value:e.selectedSubscription.service,callback:function(t){e.$set(e.selectedSubscription,"service",t)},expression:"selectedSubscription.service"}})],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Subscription:")]),s("q-select",{staticClass:"col-9",attrs:{outlined:"",dense:"",options:e.subscriptionsOptions,label:"Subscription"},on:{input:e.updateOnType},model:{value:e.selectedSubscription.subscription.type,callback:function(t){e.$set(e.selectedSubscription.subscription,"type",t)},expression:"selectedSubscription.subscription.type"}})],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Appointment counts:")]),s("q-select",{staticClass:"col-9",attrs:{outlined:"",dense:"",options:e.countOptions,label:"Appointment counts"},model:{value:e.selectedSubscription.subscription,callback:function(t){e.$set(e.selectedSubscription,"subscription",t)},expression:"selectedSubscription.subscription"}})],1)]):e._e(),"ADD"==e.state?s("q-card-section",[s("div",{staticClass:"row justify-around"},[s("p",{staticClass:"text-h5  row justify-center"},[e._v("\n            Service: "+e._s(e.selectedSubscription.service.label)+"\n          ")]),s("p",{staticClass:"text-h5  row justify-center"},[e._v("\n            Price: "+e._s(e.selectedSubscription.service.price)+"\n\n            RON\n          ")])]),s("div",{staticClass:"row justify-around"},[s("p",{staticClass:"text-h5  row justify-center"},[e._v("\n            Quantity: "+e._s(e.selectedSubscription.subscription.label)+"\n          ")]),s("p",{staticClass:"text-h5  row justify-center"},[e._v("\n            Discount:\n            "+e._s(e.selectedSubscription.service.price*e.selectedSubscription.subscription.value-e.selectedSubscription.service.price*e.selectedSubscription.subscription.value*(e.selectedSubscription.subscription.pricePercent/100))+"\n            RON\n          ")])]),e.selectedSubscription.service.price&&e.selectedSubscription.subscription?s("p",{staticClass:"text-h4  row justify-center"},[e._v("\n          Total price:\n          "+e._s(e.selectedSubscription.service.price*e.selectedSubscription.subscription.value*(e.selectedSubscription.subscription.pricePercent/100))+"\n          RON\n        ")]):e._e(),s("p")]):e._e(),"VIEW"==e.state?s("q-card-section",{staticClass:"row full-width justify-around "},[s("div",{staticClass:"column full-height "},[s("div",{staticClass:"col-3 text-black text-h5"},[e._v("Subscription")]),s("div",{staticClass:"col-3 text-grey"},[e._v("\n            Type: "+e._s(e.selectedSubscription.subscription.type)+"\n          ")]),s("div",{staticClass:"col-3 text-grey"},[e._v("\n            No. of appointments: "+e._s(e.selectedSubscription.count)+" /\n            "+e._s(e.selectedSubscription.subscription.count)+"\n          ")]),s("div",{staticClass:"col-3 text-grey"},[e._v("\n            Total cost:\n            "+e._s(e.selectedSubscription.service.price*e.selectedSubscription.subscription.count*(e.selectedSubscription.subscription.pricePercent/100))+"\n            RON\n          ")]),s("div",{staticClass:"col-3 text-grey"},[e._v("\n            Amount to be paid: "+e._s(e.selectedSubscription.amountToBePaid)+" RON\n          ")]),s("div",{staticClass:"col-3 text-grey"},[e._v("\n            Due date:\n            "+e._s(e.selectedSubscription.dueDate&&e.selectedSubscription.dueDate.substring(0,10))+"\n          ")])]),s("div",{staticClass:"column full-height "},[s("div",{staticClass:"col-3 text-black text-h5"},[e._v("Service")]),s("div",{staticClass:"col-3 text-grey"},[e._v("\n            Category: "+e._s(e.selectedSubscription.service.category)+"\n          ")]),s("div",{staticClass:"col-3 text-grey"},[e._v("\n            Name: "+e._s(e.selectedSubscription.service.name)+"\n          ")]),s("div",{staticClass:"col-3 text-grey"},[e._v("\n            Description: "+e._s(e.selectedSubscription.service.description)+"\n          ")]),s("div",{staticClass:"col-3 text-grey"},[e._v("\n            Default price: "+e._s(e.selectedSubscription.service.price)+" RON\n          ")])])]):e._e(),"VIEW"==e.state?s("q-card-section",[s("div",[e._v("Past payments:")]),e._l(e.payments,(function(t){return s("div",{key:t.id,staticClass:"col-3 text-grey row justify-start"},[s("div",[e._v("Amount: "+e._s(t.amount)+" RON")]),s("div",{staticStyle:{"margin-left":"50px"}},[e._v("\n            Date:\n            "+e._s(t.createdAt&&t.createdAt.substring(0,10))+"\n          ")])])}))],2):e._e(),"VIEW"==e.state&&e.toPay?s("q-card-section",[s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Amount to be paid:")]),s("q-input",{staticClass:"col-9",attrs:{type:"number",outlined:"",dense:"",label:"Amount"},model:{value:e.payment.amount,callback:function(t){e.$set(e.payment,"amount",t)},expression:"payment.amount"}})],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Card number")]),s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Card number"},model:{value:e.payment.cardNumber,callback:function(t){e.$set(e.payment,"cardNumber",t)},expression:"payment.cardNumber"}})],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Card owner name")]),s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Card owner name"},model:{value:e.payment.ownerName,callback:function(t){e.$set(e.payment,"ownerName",t)},expression:"payment.ownerName"}})],1),s("div",{staticClass:"row q-mb-md"},[s("div",{staticClass:"col-3 text-grey"},[e._v("Security code")]),s("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Security code"},model:{value:e.payment.securityCode,callback:function(t){e.$set(e.payment,"securityCode",t)},expression:"payment.securityCode"}})],1)]):e._e(),s("q-card-section",[s("q-card-actions",{attrs:{align:"around"}},["ADD"===e.state?s("q-btn",{attrs:{icon:"add",outline:"",color:"primary"},on:{click:e.executeAddSubscription}},[e._v("Add")]):e._e(),"VIEW"===e.state&&e.selectedSubscription.amountToBePaid>0&&!e.toPay?s("q-btn",{attrs:{outline:"",color:"primary"},on:{click:function(t){e.toPay=!e.toPay}}},[e._v("START PAYMENT")]):e._e(),"VIEW"===e.state&&e.toPay?s("q-btn",{attrs:{outline:"",color:"primary"},on:{click:e.executePayment}},[e._v("PAY")]):e._e()],1)],1)],1)],1)],1)},Ee=[],$e=s("448a"),Pe=s.n($e);s("4f7f"),s("5df3"),s("06db"),s("cadf"),s("ac6a");function Oe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function De(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(s),!0).forEach((function(t){c()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Oe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ae={name:"Subscription",data:function(){return{state:"VIEW",tab:"subscriptions",filter:"",card:!1,toPay:!1,viewMedicSubscription:"",selectedSubscription:{service:{category:"",label:"",value:"",price:"",id:""},subscription:{label:"",value:"",type:"",pricePercent:"",id:""}},payment:{cardNumber:"",securityCode:"",ownerName:"",amount:"",userSubscriptionId:""},columns:[{name:"type",required:!0,label:"Type",align:"left",field:function(e){return e.subscription.type},format:function(e){return"".concat(e)},sortable:!0},{name:"serviceName",required:!0,label:"Service",align:"left",field:function(e){return e.service.name},format:function(e){return"".concat(e)},sortable:!0},{name:"serviceCategory",required:!0,label:"Category",align:"left",field:function(e){return e.service.category},format:function(e){return"".concat(e)},sortable:!0},{name:"appointmentsLeft",required:!0,label:"Appointments left",align:"left",field:function(e){return e.count},format:function(e){return"".concat(e)},sortable:!0},{name:"availability",required:!0,label:"Availability",align:"left",field:function(e){return e.active},format:function(e){return e?"ACTIVE":"NOT ACTIVE"},sortable:!0},{name:"amountToBePaid",required:!0,label:"Amount to be paid",align:"left",field:function(e){return e.amountToBePaid},format:function(e){return"".concat(e," RON")},sortable:!0},{name:"actions",label:"Action"}]}},beforeMount:function(){var e=this.$q.localStorage.getItem("user");e?(this.$store.dispatch("data/loadSubscriptions"),this.$store.dispatch("data/loadPatientSubscriptions"),this.$store.dispatch("data/loadPayments")):this.$router.push("/auth")},methods:{updateOnType:function(){var e=this;this.selectedSubscription.subscription=this.subscriptions.map((function(e){return{value:e.count,label:e.count,type:e.type,pricePercent:e.pricePercent,id:e.id}})).find((function(t){return t.type==e.selectedSubscription.subscription.type}))},addSubscription:function(){this.state="ADD",this.card=!0,this.toPay=!1,this.selectedSubscription={service:{category:"",label:"",value:"",price:"",id:""},subscription:{label:"",value:"",type:"",pricePercent:"",id:""}}},viewSubscription:function(e){this.state="VIEW",this.card=!0,this.selectedSubscription=De({},e)},removeSubscription:function(e){var t=this;this.$q.dialog({title:"Confirmation",message:"Do you want to delete ".concat(e.subscription.type," for ").concat(e.service.name,"?"),cancel:!0,persistent:!0}).onOk((function(){t.$axios.post("/api/subscriptions/user",{subscriptionId:e.subscription.id,serviceId:e.service.id,unsubscribe:!0}).then((function(e){t.$q.notify({color:"primary",message:e.data.message,icon:"arrow_forward"}),t.$store.dispatch("data/loadPatientSubscriptions"),t.$store.dispatch("data/loadPayments")})).catch((function(e){switch(e.response.status){case 400:e.response.data.errors.forEach((function(e){t.$q.notify({color:"negative",message:e})}));break;default:t.$q.notify({color:"negative",message:e.response.data.message})}}))}))},executeAddSubscription:function(){var e=this;this.$axios.post("/api/subscriptions/user",{subscriptionId:this.selectedSubscription.subscription.id,serviceId:this.selectedSubscription.service.id}).then((function(t){e.$q.notify({color:"primary",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadPatientSubscriptions"),e.$store.dispatch("data/loadPayments"),e.card=!1})).catch((function(t){switch(t.response.status){default:e.$q.notify({color:"negative",message:t.response.data.message})}}))},executePayment:function(){var e=this;this.$axios.post("/api/payments",De(De({},this.payment),{},{userSubscriptionId:this.selectedSubscription.id})).then((function(t){e.$q.notify({color:"primary",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadPatientSubscriptions"),e.$store.dispatch("data/loadPayments"),e.toPay=!1,e.card=!1})).catch((function(t){switch(t.response.status){default:e.$q.notify({color:"negative",message:t.response.data.message})}}))}},computed:{services:function(){return this.$store.getters["data/getServices"]},categoryOptions:function(){return Pe()(new Set(this.$store.getters["data/getServices"].map((function(e){return e.category}))))},serviceOptions:function(){var e=this;return this.$store.getters["data/getServices"].filter((function(t){return!e.selectedSubscription.service.category||t.category==e.selectedSubscription.service.category})).map((function(e){return{value:e.id,label:e.name,price:e.price,category:e.category,id:e.id}}))},countOptions:function(){return this.$store.getters["data/getSubscriptions"].map((function(e){return{value:e.count,label:e.count,type:e.type,id:e.id,pricePercent:e.pricePercent}}))},subscriptionsOptions:function(){return Pe()(new Set(this.$store.getters["data/getSubscriptions"].map((function(e){return e.type}))))},subscriptions:function(){return this.$store.getters["data/getSubscriptions"]},patientSubscriptions:function(){return this.$store.getters["data/getPatientSubscriptions"]},payments:function(){var e=this;return this.$store.getters["data/getPayments"].filter((function(t){return!e.selectedSubscription.id||t.userSubscriptionId==e.selectedSubscription.id}))}}},je=Ae,Ne=Object(m["a"])(je,ke,Ee,!1,null,null,null),Me=Ne.exports;k()(Ne,"components",{QTable:f["a"],QInput:v["a"],QIcon:b["a"],QTd:g["a"],QBtn:h["a"],QSpace:ve["a"],QDialog:y["a"],QCard:q["a"],QCardSection:S["a"],QSelect:H["a"],QCardActions:U["a"]});var Te={components:{SubscriptionsForAdmin:Ce,Service:ge,Navbar:oe,Appointment:J,AppointmentForAdmin:$,Subscriptions:Me},name:"MainPage",data:function(){return{tab:"appointments"}},beforeMount:function(){var e=this.$q.localStorage.getItem("user");"admin"==e.type&&(this.tab="services")},methods:{},computed:{isMedic:function(){return!!this.$q.localStorage.getItem("user")&&"medic"==this.$q.localStorage.getItem("user").type},isAdmin:function(){return!!this.$q.localStorage.getItem("user")&&"admin"==this.$q.localStorage.getItem("user").type}}},Qe=Te,Ie=(s("d397"),s("9989")),He=s("429b"),Be=s("7460"),Re=s("adad"),Ve=s("823b"),Ue=Object(m["a"])(Qe,i,a,!1,null,null,null);t["default"]=Ue.exports;k()(Ue,"components",{QPage:Ie["a"],QTabs:He["a"],QTab:Be["a"],QTabPanels:Re["a"],QTabPanel:Ve["a"]})},"76ac":function(e,t,s){"use strict";var i=s("3dd9"),a=s.n(i);a.a},"870e":function(e,t,s){"use strict";var i=s("9700"),a=s.n(i);a.a},9700:function(e,t,s){var i=s("e480");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=s("499e").default;a("46587552",i,!0,{sourceMap:!1})},d397:function(e,t,s){"use strict";var i=s("63fa"),a=s.n(i);a.a},e0b4:function(e,t,s){var i=s("24fb");t=i(!1),t.push([e.i,".q-tab-panels{background:none}",""]),e.exports=t},e480:function(e,t,s){var i=s("24fb");t=i(!1),t.push([e.i,".q-btn[data-v-160f010f],.q-select[data-v-160f010f]{background:#fff}",""]),e.exports=t}}]);